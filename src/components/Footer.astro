---
import { format } from "date-fns"
import { getCollection } from "astro:content"
import * as footerContent from "../content/footer-content/index.md"
import * as footerVancouver from "../content/office/vancouver-digital-marketing-agency.mdx"
import * as footerToronto from "../content/office/toronto-digital-marketing-agency.mdx"
import * as footerLosAngeles from "../content/office/los-angeles-digital-marketing-agency.mdx"
import FooterClock from "./common/footer/FooterClock"

let footer = await getCollection('footer')
footer = footer.sort((a, b) => a.data.order - b.data.order)
footer = footer.filter( ( item ) => item.data.live )

let year = format(new Date(), "yyyy")
---
<footer class="bg-black flex flex-col gap-8">
    <section class="container mx-auto max-w-6xl text-white p-4 md:p-0 !py-10">
        <div class="grid grid-cols-1 md:grid-cols-12 items-center gap-8 md:gap-0">
            <div class="col-span-1 md:col-span-3 font-ir !text-3xl font-bold text-center md:text-left">{ footerContent.frontmatter.company }</div>
            <div class="col-span-1 md:col-span-6 text-center font-larsseit text-2xl">
                <span>{ footerContent.frontmatter.contact_text }</span>
                <a href={ footerContent.frontmatter.mobile_link }>
                    <span class="text-grey underline">{ footerContent.frontmatter.mobile }</span>
                </a>
            </div>
            <div class="flex col-span-1 md:col-span-3 justify-center md:justify-end gap-6">
                <a href={ footerContent.frontmatter.instagram } target="_blank">
                    <div class="w-6 h-6">
                        <img
                            src="/icons/instagram.svg"
                            class="w-full h-full object-fill"
                        />
                    </div>
                </a>
                <a href={ footerContent.frontmatter.facebook } target="_blank">
                    <div class="w-6 h-6">
                        <img
                            src="/icons/facebook.svg"
                            class="w-full h-full object-fill"
                        />
                    </div>
                </a>
                <a href={ footerContent.frontmatter.twitter } target="_blank">
                    <div class="w-6 h-6">
                        <img
                            src="/icons/twitter.svg"
                            class="w-full h-full object-fill"
                        />
                    </div>
                </a>
                <a href={ footerContent.frontmatter.linkedin } target="_blank">
                    <div class="w-6 h-6">
                        <img
                            src="/icons/linkedin.svg"
                            class="w-full h-full object-fill"
                        />
                    </div>
                </a>
            </div>
        </div>
    </section>
    <section class="flex items-center justify-center">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-12">
            <FooterClock
                client:load
                link={ footerLosAngeles.frontmatter.link }
                location={ footerLosAngeles.frontmatter.location }
                offset={ footerLosAngeles.frontmatter.time_offset }
                temperature={ 24 }
            />
            <FooterClock
                client:load
                link={ footerToronto.frontmatter.link }
                location={ footerToronto.frontmatter.location }
                offset={ footerToronto.frontmatter.time_offset }
                temperature={ 24 }
            />
            <FooterClock
                client:load
                link={ footerVancouver.frontmatter.link }
                location={ footerVancouver.frontmatter.location }
                offset={ footerVancouver.frontmatter.time_offset }
                temperature={ 24 }
            />
        </div>
    </section>
    <section class="container mx-auto max-w-6xl text-white  p-4 md:p-0 !py-10">
        <div class="flex flex-col-reverse md:flex-row justify-between gap-4 md:gap-0 place-items-center">
            <div class="font-karla text-sm text-grey font-semibold text-center">&copy { year } { footerContent.frontmatter.about }</div>
            <nav class="">
                <ul class="flex gap-4 justify-center !list-none list-inside p-0">
                    {

                        footer.map( ( item ) => {

                            return (
                                <a href={ "/" + item.data.link }>
                                    <li class="uppercase font-karla text-sm font-bold text-white">{ item.data.title }</li>
                                </a>
                            )

                        })

                    }
                </ul>
            </nav>
        </div>
    </section>
</footer>
